<?php
    include(__DIR__ . '/browserGeo.inc.php');
    $countFromCountries = getCountFromCountries();
?>

<div class="container-fluid" style="background-color: rgba(0, 0, 0, .5);">
    <div class="row"> 
        <div class="d-flex justify-content-center flex-nowrap">
            <div class="col">
            </div>
            <div class="col">
                <div class="map p-0" id="svgMap">  
                </div>
            </div>
            <div class="col mx-0">
            </div>
        </div>
    </div>
</div> 

<script src="../scripts/svgMap/svg-pan-zoom.js"></script>
<script src="../scripts/svgMap/svgMap.js"></script>

<script>
    headerHeight = document.getElementById("header").clientHeight;
    subHeaderHeight = document.getElementById("subHeader").clientHeight;
    //let footerHeight = document.getElementById("footer").clientHeight;
    wrapperHeight = window.innerHeight - headerHeight - subHeaderHeight - 0;

    ratio = window.innerWidth / window.innerHeight;
    mapWidth = wrapperHeight * ratio;
    document.getElementById("svgMap").setAttribute("style","width:" + mapWidth);
    
    new svgMap({
        targetElementID: 'svgMap',
        mouseWheelZoomEnabled: false,
        colorMax: 'FFFFFF',
        colorMin: 'FFFFFF',
        colorNoData: '#328771',
        noDataText: '',
        data: {
            data: {
                hooked: {
                    name: 'Hooked',
                    format: '{0}'
                }
            },
            applyData: 'hooked',
            values: {
                <?php
                    if(count($countFromCountries) >= 1) {
                        if(count($countFromCountries) > 1) {
                            for($i = 0 ; $i < count($countFromCountries) -1 ; $i++) {
                                echo '"' . $countFromCountries[$i]["countryCode"] . '": { hooked: ' . $countFromCountries[$i]["count"] . '},';
                            }
                        }
                        echo '"' . end($countFromCountries)['countryCode'] . '": { hooked: ' . end($countFromCountries)['count'] . '},';
                    }
                ?> 
            }
        }
    });
    document.getElementsByClassName('svgMap-tooltip')[0].setAttribute("style","opacity: 1.0;");
</script>